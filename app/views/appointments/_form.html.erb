<div class="max-w-xl mx-auto bg-white/30 rounded-3xl shadow-2xl p-12 space-y-12 backdrop-blur-md border border-white/20" style="background: linear-gradient(135deg, #a5b4fc 0%, #818cf8 100%);">
  <h2 class="text-3xl font-bold text-white mb-10 text-center drop-shadow">Novo Agendamento</h2>
  <%= simple_form_for(@appointment, html: { data: { controller: "appointment-form" }, class: "space-y-10" }) do |f| %>
  <%= f.error_notification %>
  <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>

    <div class="form-inputs space-y-8">
    <div>
        <%= f.label :patient_id, "Paciente", class: "block text-base font-bold text-white mb-2" %>
        <%= f.association :patient, input_html: { class: "w-full rounded-xl p-3 text-gray-900 placeholder-gray-400 shadow-inner focus:ring-2 focus:ring-indigo-500 bg-white/80" }, prompt: "Selecione o paciente", label: false %>
    </div>
    <div>
        <%= f.label :professional_id, "Profissional", class: "block text-base font-bold text-white mb-2" %>
        <%= f.association :professional, input_html: { class: "w-full rounded-xl p-3 text-gray-900 placeholder-gray-400 shadow-inner focus:ring-2 focus:ring-indigo-500 bg-white/80", data: { appointment_form_target: "professional", action: "change->appointment-form#updateTimes" } }, prompt: "Selecione o profissional", label: false %>
    </div>
    <div>
        <%= f.label :room_id, "Sala", class: "block text-base font-bold text-white mb-2" %>
        <%= f.association :room, input_html: { class: "w-full rounded-xl p-3 text-gray-900 placeholder-gray-400 shadow-inner focus:ring-2 focus:ring-indigo-500 bg-white/80" }, prompt: "Selecione a sala", label: false %>
    </div>
    <div>
        <%= f.label :specialty_id, "Tipo de sessão (Especialidade)", class: "block text-base font-bold text-white mb-2" %>
        <%= f.association :specialty, input_html: { class: "w-full rounded-xl p-3 bg-white/80 text-gray-900 focus:ring-2 focus:ring-indigo-500" }, prompt: "Selecione a especialidade", required: true, label: false %>
      </div>
      <div>
        <%= f.label :start_time, "Data do atendimento", for: "appointment_start_time_3i", class: "block text-base font-bold text-white mb-2" %>
        <div class="flex flex-wrap gap-4">
          <%= select_tag 'appointment[start_time(3i)]', options_for_select((1..31).map { |d| [d, d] }, @appointment.start_time&.day), class: "rounded-xl p-2 bg-white/80 text-gray-900 focus:ring-2 focus:ring-indigo-500" %>
          <%= select_tag 'appointment[start_time(2i)]', options_for_select(I18n.t('date.month_names').compact.each_with_index.map { |m, i| [m, i+1] }, @appointment.start_time&.month), class: "rounded-xl p-2 bg-white/80 text-gray-900 focus:ring-2 focus:ring-indigo-500" %>
          <%= select_tag 'appointment[start_time(1i)]', options_for_select((Date.current.year..(Date.current.year+5)).to_a, @appointment.start_time&.year || Date.current.year), class: "rounded-xl p-2 bg-white/80 text-gray-900 focus:ring-2 focus:ring-indigo-500" %>
          <span class="mx-2 font-bold text-indigo-100">-</span>
          <%= select_tag 'appointment[start_time(4i)]', options_for_select((0..23).map { |h| ["%02d" % h, h] }, @appointment.start_time&.hour), class: "rounded-xl p-2 bg-white/80 text-gray-900 focus:ring-2 focus:ring-indigo-500" %>
          <span class="font-bold text-indigo-100">:</span>
          <%= select_tag 'appointment[start_time(5i)]', options_for_select((0..59).map { |m| ["%02d" % m, m] }, @appointment.start_time&.min), class: "rounded-xl p-2 bg-white/80 text-gray-900 focus:ring-2 focus:ring-indigo-500", data: { appointment_form_target: "date" } %>
      </div>
    </div>
    <div>
        <%= f.label :duration, "Duração da sessão", class: "block text-base font-bold text-white mb-2" %>
        <%= f.select :duration, options_for_select([["30 minutos", 30], ["45 minutos", 45], ["1 hora", 60]], @appointment.duration), {}, class: "w-full rounded-xl p-3 bg-white/80 text-gray-900 focus:ring-2 focus:ring-indigo-500", data: { appointment_form_target: "duration", action: "change->appointment-form#updateTimes" } %>
    </div>
    <div>
        <%= f.label :status, "Status", class: "block text-base font-bold text-white mb-2" %>
        <%= f.input :status, input_html: { class: "w-full rounded-xl p-3 bg-white/80 text-gray-900 focus:ring-2 focus:ring-indigo-500" }, placeholder: "Ex: realizado, pendente, cancelado", label: false %>
    </div>
    <div>
        <%= f.label :notes, "Observações", class: "block text-base font-bold text-white mb-2" %>
        <%= f.input :notes, input_html: { class: "w-full rounded-xl p-3 bg-white/80 text-gray-900 focus:ring-2 focus:ring-indigo-500" }, placeholder: "Observações gerais do atendimento", label: false %>
      </div>
    </div>

    <div class="form-actions mt-12 flex justify-center">
      <button type="submit" class="bg-indigo-600 text-white px-10 py-4 rounded-lg hover:bg-indigo-700 text-xl font-bold shadow transition">Salvar</button>
  </div>
<% end %>
</div>
