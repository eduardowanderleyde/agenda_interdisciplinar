<div class="max-w-2xl mx-auto bg-white rounded-lg shadow p-12 space-y-8">
  <%= simple_form_for(@professional) do |f| %>
    <%= f.error_notification %>
    <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>

    <div class="form-inputs space-y-6">
      <div>
        <%= f.input :name, input_html: { class: 'w-full px-3 py-2 border border-gray-300 rounded-lg' }, label_html: { class: 'block text-lg font-bold text-indigo-700 mb-3' } %>
      </div>
      <div class="mt-6">
        <label class="block text-lg font-bold text-indigo-700 mb-3">Especialidades</label>
        <div class="flex flex-wrap gap-4 mb-2">
          <% Specialty.all.each do |spec| %>
            <label class="inline-flex items-center mr-6 mb-2">
              <%= check_box_tag 'professional[specialty_ids][]', spec.id, @professional.specialty_ids.include?(spec.id), class: 'form-checkbox text-indigo-600 rounded' %>
              <span class="ml-2 text-sm"><%= spec.name %></span>
            </label>
          <% end %>
        </div>
      </div>
      <div class="mt-6">
        <label class="block text-lg font-bold text-indigo-700 mb-3">Dias disponíveis</label>
        <div class="flex flex-wrap gap-4">
          <%= f.collection_check_boxes :available_days, [
            ['monday', 'Segunda'],
            ['tuesday', 'Terça'],
            ['wednesday', 'Quarta'],
            ['thursday', 'Quinta'],
            ['friday', 'Sexta']
          ], :first, :last do |b| %>
            <div class="flex items-center mr-4 mb-2">
              <%= b.check_box(class: "mr-1") %>
              <%= b.label(class: "text-sm") %>
            </div>
          <% end %>
        </div>
      </div>
      <div class="mt-6">
        <label class="block text-lg font-bold text-indigo-700 mb-3">Horários disponíveis</label>
        <div data-controller="horarios">
          <div class="flex gap-2 mb-2">
            <input type="text" id="horario_inicio" data-horarios-target="inicio" maxlength="5" pattern="\\d{2}:\\d{2}" placeholder="Início (Ex: 08:00)" class="border rounded p-2 w-28" autocomplete="off">
            <span class="font-bold">até</span>
            <input type="text" id="horario_fim" data-horarios-target="fim" maxlength="5" pattern="\\d{2}:\\d{2}" placeholder="Fim (Ex: 12:00)" class="border rounded p-2 w-28" autocomplete="off">
            <button type="button" class="px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition" data-action="click->horarios#addIntervalo">Adicionar intervalo</button>
          </div>
          <ul id="lista-horarios" data-horarios-target="list" class="flex flex-wrap gap-2 mb-2">
            <% (@professional.available_hours || []).each do |intervalo| %>
              <li class="flex items-center bg-gray-100 rounded px-2 py-1 mb-1">
                <span data-horarios-target="item" class="mr-2"><%= intervalo %></span>
                <button type="button" class="text-red-600 ml-1" data-action="click->horarios#remove">&times;</button>
                <input type="hidden" name="professional[available_hours][]" value="<%= intervalo %>">
              </li>
            <% end %>
          </ul>
        </div>
        <small class="text-gray-500">Digite o horário de início e fim no formato HH:MM. O intervalo será salvo ao criar o profissional.</small>
      </div>
      <div class="mt-6">
        <label class="block text-lg font-bold text-indigo-700 mb-3">Duração padrão da sessão</label>
        <%= f.select :default_session_duration, options_for_select([["30 minutos", 30], ["45 minutos", 45], ["60 minutos", 60]], @professional.default_session_duration), {}, class: "block w-48 p-2 border rounded" %>
      </div>
    </div>

    <div class="form-actions flex justify-end pt-8 mb-8 mt-8">
      <%= f.button :submit, "Criar novo Profissional", class: "px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors" %>
    </div>
  <% end %>
</div>
